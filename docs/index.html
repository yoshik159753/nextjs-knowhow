<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Next.js KnowHow</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Next.js KnowHow</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.udemy.com/course/awesome-nextjs-with-react-and-node-amazing-portfolio-app/">Complete Next.js with React &amp; Node - Beautiful Portfolio App</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/Jerga99/movie-app-course">movie-app-course</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://nextjs.org/docs/getting-started">next.js docs</a></p>
</li>
<li>
<p><a href="https://ja.reactjs.org/docs/getting-started.html">react docs</a></p>
</li>
<li>
<p><a href="https://jsprimer.net/">JavaScript Primer 迷わないための入門書</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_movie_app_course_のディレクトリ構成">movie-app-course のディレクトリ構成</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ tree --charset unicode -I node_modules
.
|-- README.adoc
|-- actions
|   `-- index.js
|-- components
|   |-- carousel.js // <b class="conum">(1)</b>
|   |-- footer.js
|   |-- modal.js
|   |-- movieCreateForm.js
|   |-- movieList.js
|   |-- navbar.js
|   `-- sideMenu.js
|-- next.config.js
|-- package-lock.json
|-- package.json
|-- pages
|   |-- _app.js
|   |-- about.js
|   |-- api
|   |   `-- v1
|   |       `-- posts.js
|   |-- contact.js
|   |-- index.js
|   |-- movies
|   |   `-- [id]
|   |       |-- edit.js
|   |       `-- index.js
|   |-- posts.js
|   `-- services.js
|-- resources
|   |-- 1_data.js
|   |-- 2_create_form.js
|   |-- 3_server.js
|   `-- 4_data.json
|-- server
|   |-- data.json
|   `-- index.js
|-- static
|   `-- favicon.ico
`-- styles
    `-- index.scss

11 directories, 29 files</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>carousel は回転木馬。しいてはスライドしながら画像表示するやつ</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_初期化">初期化</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">npx create-next-app lean-nextjs-movie-app</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_functional_component">functional component</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">functional component - arrow function - 1</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const About = () =&gt; ( // <b class="conum">(1)</b>
  &lt;h1&gt;Hello About Page&lt;/h1&gt;
)</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>この書き方の場合は内部で変数宣言ができない</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">functional component - arrow function - 2</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const About = () =&gt; {
  const message = 'Hello World'
  return (
    &lt;h1&gt;Hello About Page - {message}&lt;/h1&gt;
  )
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">functional component - arrow function - 3</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const About = () =&gt; {
  const message = 'Hello World'
  return React.createElement('h1', null, 'I am genereting this with createElement')
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">unctional component - normal function</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">function About() {
  return (
    &lt;h1&gt;Hello About Page&lt;/h1&gt;
  )
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>functional component の使いどころは次のようなケース。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>小さいコンポーネント</p>
</li>
<li>
<p>再利用可能なコンポーネント</p>
</li>
<li>
<p>presentional components , patialy right, we can use HOOKS and specify state(UI 的なコンポーネント？)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_class_component">class component</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">class component</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">class About extends React.Component {
  render() { // <b class="conum">(1)</b>
    return (
      &lt;h1&gt;Hello I am class component&lt;/h1&gt;
    )
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>render() は React が予約している描画用のメソッド</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>大きめなコンポーネントはクラスで作るとよい。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fragment">Fragment</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>フラグメント (fragment) を使うことで、DOM に余分なノードを追加することなく子要素をまとめることができるようになります。</p>
</div>
</blockquote>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">NG</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">render() {
  return (
    &lt;div&gt;
      &lt;td&gt;Hello&lt;/td&gt;
      &lt;td&gt;World&lt;/td&gt;
    &lt;/div&gt;
  );
}
// &lt;table&gt;
//   &lt;tr&gt;
//     &lt;div&gt;
//       &lt;td&gt;Hello&lt;/td&gt;
//       &lt;td&gt;World&lt;/td&gt;
//     &lt;/div&gt;
//   &lt;/tr&gt;
// &lt;/table&gt;</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">OK</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">render() {
  return (
    &lt;React.Fragment&gt;
      &lt;td&gt;Hello&lt;/td&gt;
      &lt;td&gt;World&lt;/td&gt;
    &lt;/React.Fragment&gt;
  );
}
// &lt;table&gt;
//   &lt;tr&gt;
//     &lt;td&gt;Hello&lt;/td&gt;
//     &lt;td&gt;World&lt;/td&gt;
//   &lt;/tr&gt;
// &lt;/table&gt;</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_style">style</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>CSS のクラスをコンポーネントに適用するには、クラス名を文字列として className プロパティに与えてください。</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">render() {
  return (
    &lt;div className="home-page"&gt;
    // 略
    &lt;/dev&gt;
    &lt;style jsx&gt;{`
      .home-page {
        padding-top: 80px;
      }
    `}
    &lt;/style&gt;
  );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next で css ファイルや scss ファイルをインポートするにはパッケージのインストールが必要。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">npm install --save @zeit/next-css @zeit/next-sass node-sass</code></pre>
</div>
</div>
<div class="paragraph">
<p>次にトップディレクトリの next.config.js に利用宣言を記述。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// いまどきな書き方？
const withSass = require('@zeit/next-sass')
module.exports = withSass({
  cssModules: true
})

// 古い書き方？(Udemy でみた教材の書き方)
const withCss = require('@zeit/next-css')
const withSass = require('@zeit/next-sass')

module.exports = withCss(withSass())</code></pre>
</div>
</div>
<div class="paragraph">
<p>scss をインポートして使う。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// pages/_app.js
import Navbar from '../components/navbar'
import Footer from '../components/footer'

import '../styles/index.scss' // <b class="conum">(1)</b>

class MovieApp extends App {

// components/movieList.js
      &lt;a&gt;{movie.name}&lt;/a&gt;
    &lt;/Link&gt;
  &lt;/h4&gt;
  &lt;div className="movie-genre"&gt;{movie.genre}&lt;/div&gt; // <b class="conum">(2)</b>
  &lt;p className="card-text"&gt;{this.shorten(movie.description, 100)}&lt;/p&gt;
&lt;/div&gt;
&lt;div className="card-footer"&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>ベースとなる _app.js で scss をインポート</p>
</li>
<li>
<p>コンポーネントの className で適用。コンポーネント側では scss をインポートする必要はない</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_関数の宣言">関数の宣言</h2>
<div class="sectionbody">
<div class="paragraph">
<p>関数の宣言方法により呼び出し方が異なる。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">レギュラー関数その1</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">increment() {
  const { count } = this.state
  this.setState({ count: count + 1 })
}

render() {
  return (
    &lt;div className="container"&gt;
      &lt;button onClick={() =&gt; this.decrement()} className="btn btn-primary"&gt;Increment Number&lt;/button&gt; // <b class="conum">(1)</b>
      &lt;h1&gt;{this.state.count}&lt;/h1&gt;
    &lt;/div&gt;
  )
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>通常関数の場合は <code>() &#8658; this.decrement()</code> で呼び出す必要がある</p>
</li>
</ol>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">レギュラー関数その2</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">class Foo extends React.Component {
  constructor(props) {
    super(props)
    this.state = {
      count: 0
    }
    this.increment = this.increment.bind(this) // <b class="conum">(1)</b>
  }
  increment() {
    const { count } = this.state
    this.setState({ count: count + 1 })
  }
  render() {
    return (
      &lt;div className="container"&gt;
        &lt;button onClick={this.increment} className="btn btn-primary"&gt;Decrement Number&lt;/button&gt; // <b class="conum">(2)</b>
      &lt;/div&gt;
    )
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>明示的にバインド</p>
</li>
<li>
<p>明示的にバインドした場合は <code>this.increment</code> で呼び出せる</p>
</li>
</ol>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">アロー関数</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">increment = () =&gt; {
  const { count } = this.state
  this.setState({ count: count + 1 })
}

render() {
  return (
    &lt;div className="container"&gt;
      &lt;button onClick={this.increment} className="btn btn-primary"&gt;Increment Number&lt;/button&gt; // <b class="conum">(1)</b>
      &lt;h1&gt;{this.state.count}&lt;/h1&gt;
    &lt;/div&gt;
  )
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>アロー関数の場合は <code>this.increment</code> で呼び出す必要がある</p>
</li>
</ol>
</div>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><a href="https://ja.reactjs.org/tutorial/tutorial.html#making-an-interactive-component">React のチュートリアル</a> に乗っ取るならば、レギュラー関数その1の方法がよい。</p>
</div>
<div class="paragraph">
<p>なお、これらは javascript における context の考え方による違い。
詳細は下記のサイトをみると良いかも？</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://qiita.com/suin/items/a44825d253d023e31e4d">JavaScript: 通常の関数とアロー関数の違いは「書き方だけ」ではない。異なる性質が10個ほどある。</a></p>
</li>
<li>
<p><a href="https://qiita.com/takeharu/items/9935ce476a17d6258e27#%E3%81%BE%E3%81%A8%E3%82%81">JavaScriptの「this」は「4種類」？？ - Qiita</a></p>
</li>
<li>
<p><a href="https://qiita.com/takkyun/items/c6e2f2cf25327299cf03">JavaScript の this を理解する多分一番分かりやすい説明 - Qiita</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_debugger">debugger</h2>
<div class="sectionbody">
<div class="paragraph">
<p>処理の途中に <code>debugger</code> を宣言し、ブラウザで inspect を開いて実行すると、処理が止まってデバックができるようになる。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">increment = () =&gt; {
  const { count } = this.state
  debbuger // <b class="conum">(1)</b>
  this.setState({ count: count + 1 })
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>debugger の宣言</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_状態の管理">状態の管理</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
React コンポーネントはコンストラクタで this.state を設定することで、状態を持つことができるようになります。
</blockquote>
<div class="attribution">
&#8212; <a href="https://ja.reactjs.org/tutorial/tutorial.html#making-an-interactive-component">React チュートリアルより</a>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">class Foo extends React.Component {
  constructor(props) {
    super(props)
    this.state = { // <b class="conum">(1)</b>
      count: 0
    }
  }

  increment = () =&gt; {
    const { count } = this.state <b class="conum">(3)</b>
    // VERY BAD
    // this.state.count = count + 1
    this.setState({ count: count + 1 }) <b class="conum">(2)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>state の宣言</p>
</li>
<li>
<p>state を変更する場合は <code>setState</code> を使わないと変更されない</p>
</li>
<li>
<p>省略プロパティ名。 <code>const count = this.state.count</code> と同等</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>functional component で状態を管理する場合には、 <a href="https://ja.reactjs.org/docs/hooks-reference.html#usestate">useState フック</a> を使う。</p>
</div>
<div class="listingblock">
<div class="title">functional component におけるサンプル</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">import { useState } from 'react'

export default function foo() {

  const initialState = 0
  const [ state, setState ] = useState(initialState) // <b class="conum">(1)</b> <b class="conum">(2)</b>

  const increment = () =&gt; {
    const newstate = state + 1
    setState(newstate)
  }

  return (
    &lt;React.Fragment&gt;
      &lt;div className="container"&gt;
        &lt;button onClick={increment} className="btn btn-primary"&gt;Increment Number&lt;/button&gt;
        &lt;h1&gt;{state}&lt;/h1&gt;
      &lt;/div&gt;
    &lt;/React.Fragment&gt;
  )
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>state</code> は現在の状態</p>
</li>
<li>
<p><code>setState</code> は <code>state</code> を更新するためのメソッド。 <code>setState</code> を呼ぶたびにコンポーネントは再描画されるっぽい</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">functional component におけるサンプル2</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">import { useState } from 'react'

const MovieCreateForm = () =&gt; {
  const [form, setForm] = useState({
    name: 'Some Movie',
    description: 'Some Description'
  })

  const handleChange = (event) =&gt; {
    const target = event.target // <b class="conum">(1)</b>
    const name = target.name // <b class="conum">(2)</b>

    setForm({ // <b class="conum">(3)</b>
      ...form,
      [name]: target.value
    })
  }

  return (
    &lt;form&gt;
      { JSON.stringify(form)}
      &lt;div className="form-group"&gt;
        &lt;label for="name"&gt;Name&lt;/label&gt;
        &lt;input
          onChange={handleChange} // <b class="conum">(4)</b>
          value={form.name}
          name="name"
          type="text"
          className="form-control"
          id="name"
          aria-describedby="emailHelp"
          placeholder="Lord of the Rings" /&gt;
      &lt;/div&gt;
      // 以下略
    &lt;/form&gt;
  )
}

export default MovieCreateForm</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>event.target で要素を取得</p>
</li>
<li>
<p>target.name で要素の name 属性を取得</p>
</li>
<li>
<p>form を展開して上書きしている <a href="https://jsprimer.net/basic/object/#object-spread-syntax">参照</a></p>
</li>
<li>
<p>handler の呼び出し</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_props_の伝播">props の伝播</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">親コンポーネント</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">export default function foo() {
  const initialState = 0
  const [ state, setState ] = useState(initialState)

  const increment = () =&gt; {
    const newstate = state + 1
    setState(newstate)
  }

  return (
    &lt;React.Fragment&gt;
      &lt;div className="container"&gt;
        &lt;button onClick={increment} className="btn btn-primary"&gt;Increment Number&lt;/button&gt;
      &lt;/div&gt;
      &lt;ClassComponent // <b class="conum">(1)</b>
        foo={state}
        cap="Class Component"
        clickHandler={() =&gt; {console.log("Hello World")}} /&gt;
      &lt;FunctionalComponent // <b class="conum">(2)</b>
        foo={state}
        cap="Functional Component"
        clickHandler={() =&gt; {console.log("Hello World")}} /&gt;
    &lt;/React.Fragment&gt;
  )
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>クラスコンポーネントへの伝播</p>
</li>
<li>
<p>関数コンポーネントへの伝播</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">子のクラスコンポーネント</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">class Foo extends React.Component {
  render() {
    // debugger
    return (
      &lt;div className="container"&gt;
        &lt;h1&gt;{this.props.cap}: [{this.props.foo}]&lt;/h1&gt; // <b class="conum">(1)</b>
        &lt;button onClick={this.props.clickHandler}&gt;Click ME!&lt;/button&gt;
      &lt;/div&gt;
    )
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>親からのパラメーターはオブジェクトとして受けるので <code>this.props.xxx</code> でアクセスできる</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>暗黙的にコンストラクタで受けてクラスのメンバに設定してるっぽい？</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">子の関数コンポーネント</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">export default function foo(props) { // <b class="conum">(1)</b>
  return (
    &lt;div className="container"&gt;
      &lt;h1&gt;{props.cap}: [{props.foo}]&lt;/h1&gt; // <b class="conum">(1)</b>
      &lt;button onClick={props.clickHandler}&gt;Click ME!&lt;/button&gt;
    &lt;/div&gt;
  )
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>親からのパラメーターはオブジェクトとして引数で受けるので <code>props.xxx</code> でアクセスできる</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_promise">promise</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">getMovies = () =&gt; {
  return new Promise((resolve, reject) =&gt; { // <b class="conum">(1)</b>
    setTimeout(() =&gt; {
      resolve(MOVIE_DATA) // <b class="conum">(2)</b>
    }, 2000)
  })
}

Home = () =&gt; {
  const [movies, setMovies] = useState([])

  // improve this because now it's called everytime!
  getMovies().then((movies) =&gt; { // <b class="conum">(3)</b> <b class="conum">(4)</b>
    setMovies(movies)
  })

  return (...)
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>promise オブジェクトを返す</p>
</li>
<li>
<p>resolve (正常終了)時のコールバック</p>
</li>
<li>
<p>then で promise オブジェクトに対して await</p>
</li>
<li>
<p>引数で resolve の引数を受け取る</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_react_における問題点">React における問題点</h3>
<div class="paragraph">
<p>コンポーネント内で <code>setState</code> で state を更新すると、コンポーネントの render が再度呼び出される。
このとき、コンポーネントが promise を用いて非同期で setState を呼び出すとどうなるか？</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>functional compornent 呼び出し</p>
</li>
<li>
<p>promise による非同期処理の予約</p>
</li>
<li>
<p>render で描画</p>
</li>
<li>
<p>非同期で setState 呼び出し</p>
</li>
<li>
<p>setState の呼び出しでコンポーネントの再描画 (functional compornent 呼び出し)</p>
</li>
<li>
<p>promise による非同期処理の予約</p>
</li>
<li>
<p>以下ループ&#8230;&#8203;</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>というように無限ループとなる。
これを抑止するためには <code>setState</code> の呼び出しに条件をつける必要がある。(state が変更した場合のみ再描画、みたいな)
これを実現するのが <code>useEffect</code> 。</p>
</div>
<div class="paragraph">
<p>なお、そもそも functional component を使っているから上記のような事象が発生する。
なので class component を使って、ライフサイクルの中 (componentDidMount) で promise を resolve する、というのも手の一つ。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_useeffect">useEffect</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
副作用を有する可能性のある命令型のコードを受け付けます。
</blockquote>
<div class="attribution">
&#8212; <a href="https://ja.reactjs.org/docs/hooks-reference.html#useeffect">React チュートリアルより</a>
</div>
</div>
<div class="quoteblock">
<blockquote>
useEffect に渡された関数はレンダーの結果が画面に反映された後に動作します。副作用とは React の純粋に関数的な世界から命令型の世界への避難ハッチであると考えてください。
</blockquote>
<div class="attribution">
&#8212; <a href="https://ja.reactjs.org/docs/hooks-reference.html#useeffect">React チュートリアルより</a>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">import React, { useState, useEffect } from 'react'

const Home = () =&gt; {
  const [movies, setMovies] = useState([])

  useEffect(() =&gt; {
    const fetchData = async () =&gt; {
      const resMovies = await getMovies()
      setMovies(resMovies)
    }
    fetchData();
  }, [movies]) // <b class="conum">(1)</b>

  // 以下略</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>movies</code> が変更された場合にのみ再描画されるようになる</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_class_component_による非同期_setstate">class component による非同期 setState</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
componentDidMount() は、コンポーネントがマウントされた（ツリーに挿入された）直後に呼び出されます。DOM ノードを必要とする初期化はここで行われるべきです。
</blockquote>
<div class="attribution">
&#8212; <a href="https://ja.reactjs.org/docs/react-component.html#componentdidmount">React Docs より</a>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">class Home extends React.Component {
  constructor(props) {
    super(props)
    this.state = {
      movies: [],
      errorMessage: ''
    }
  }
  componentDidMount() {
    getMovies()
      .then((movies) =&gt; {
        this.setState({movies})
      })
      .catch((error) =&gt; {
        this.setState({errorMessage: error})
      })
  }
  render() {
    const { movies, errorMessage } = this.state
    return (
      // ...
      { errorMessage &amp;&amp; // <b class="conum">(1)</b>
        &lt;div className="alert alert-danger" role="alert"&gt;
          { errorMessage }
        &lt;/div&gt;
      }
      &lt;MovieList movies={movies} /&gt;
      // ...
    )
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>errorMessage が設定されていればエラーメッセージを表示</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getinitialprops">getInitialProps</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
推奨: getStaticProps または getServerSideProps。Next.js 9.3以降を使用している場合は、getInitialPropsではなくgetStaticPropsやgetServerSidePropsを使用することをお勧めします。
</blockquote>
<div class="attribution">
&#8212; <a href="https://nextjs.org/docs/api-reference/data-fetching/getInitialProps">Next.js Docs より</a>
</div>
</div>
<div class="quoteblock">
<blockquote>
getInitialPropsは、ページ内のサーバーサイドレンダリングを可能にし、初期データを生成することを可能にします。これは特にSEO対策に便利です。
</blockquote>
<div class="attribution">
&#8212; <a href="https://nextjs.org/docs/api-reference/data-fetching/getInitialProps">Next.js Docs より</a>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const Home = (props) =&gt; { // <b class="conum">(2)</b>
  return (
    &lt;div&gt;
      &lt;div className="home-page"&gt;
        &lt;div className="container"&gt;
          &lt;div className="row"&gt;
            &lt;div className="col-lg-9"&gt;
              &lt;div className="row"&gt;
                &lt;MovieList movies={props.movies} /&gt; // <b class="conum">(3)</b>
              &lt;/div&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  )
}

Home.getInitialProps = async () =&gt; { // <b class="conum">(1)</b>
  const movies = await getMovies()
  return { movies } // <b class="conum">(4)</b>
}

export default Home</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>getInitialProps の宣言。async/await として宣言する必要あり</p>
</li>
<li>
<p>props で getInitialProps の return を受け取る</p>
</li>
<li>
<p>getInitialProps で取得した movies を参照</p>
</li>
<li>
<p>この返し方をすると、受け手側では <code>props.movies.id</code> みたいな感じで使える。逆に展開してしまうと <code>props.id</code> といった記述になる</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>getInitialProps で受け取る引数の属性は次の通り。
<a href="https://nextjs.org/docs/api-reference/data-fetching/getInitialProps#context-object">(参照元)</a></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
pathname
</td>
<td class="hdlist2">
<p>Current route. That is the path of the page in /pages</p>
</td>
</tr>
<tr>
<td class="hdlist1">
query
</td>
<td class="hdlist2">
<p>Query string section of URL parsed as an object</p>
</td>
</tr>
<tr>
<td class="hdlist1">
asPath
</td>
<td class="hdlist2">
<p>String of the actual path (including the query) shown in the browser</p>
</td>
</tr>
<tr>
<td class="hdlist1">
req
</td>
<td class="hdlist2">
<p>HTTP request object (server only)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
res
</td>
<td class="hdlist2">
<p>HTTP response object (server only)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
err
</td>
<td class="hdlist2">
<p>Error object if any error is encountered during the rendering</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_link">link</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">import Link from 'next/link'

export default function FirstPost() {
  return (
    &lt;&gt;
      &lt;h1&gt;First Post&lt;/h1&gt;
      &lt;h2&gt;
        &lt;Link href="/"&gt; // <b class="conum">(1)</b>
          &lt;a&gt;Back to home&lt;/a&gt;
        &lt;/Link&gt;
      &lt;/h2&gt;
    &lt;/&gt;
  )
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>a タグを link タグでラップするルール</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_app_component">app component</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
Next.jsはAppコンポーネントを使ってページの初期化を行います。これをオーバーライドしてページの初期化を制御することができます。
</blockquote>
<div class="attribution">
&#8212; <a href="https://nextjs.org/docs/advanced-features/custom-app">Next.js Docs より</a>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// pages/_app.js // <b class="conum">(1)</b>

import App from 'next/app'
import Head from 'next/head'
import Navbar from '../components/navbar'
import Footer from '../components/footer'

class MovieApp extends App { // <b class="conum">(2)</b>

  static async getInitialProps(appContext) { // <b class="conum">(3)</b>
    // Executing getInitialProps of page you are navigated to
    const appProps = await App.getInitialProps(appContext) // <b class="conum">(4)</b>
    return { ...appProps } // <b class="conum">(5)</b>
  }

  render() {
    const { Component, pageProps } = this.props // <b class="conum">(6)</b>

    return (
      &lt;div&gt;
        &lt;Head&gt;
          &lt;title&gt;Home&lt;/title&gt;
          // ...略...
        &lt;/Head&gt;
        &lt;Navbar /&gt;
        &lt;div className="base-page"&gt;
          &lt;Component {...pageProps} /&gt; // <b class="conum">(7)</b>
        &lt;/div&gt;
        // ...略...
      &lt;/div&gt;
    )
  }
}

export default MovieApp</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>_app.js は命名規約</p>
</li>
<li>
<p>対象 page を呼び出すと、まずこの MovieApp が呼び出される</p>
</li>
<li>
<p>フレームワークより getInitialProps が呼ばれ</p>
</li>
<li>
<p>対象 page の getInitialProps を呼び出す。 appContext はおまじない</p>
</li>
<li>
<p>appProps を展開したオブジェクトを返すと</p>
</li>
<li>
<p>クラス変数の props として参照できる。 Component もおまじないで、対象ページをコンポーネントとして扱っている(？)</p>
</li>
<li>
<p>対象 page をコンポーネントとして呼び出して、 getInitialProps で取得した値を設定する</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>わからん。
親側で子のデータを取得して、子を呼び出すときにデータを設定してる？
親側でハンドリングしてる感じか。。？</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dynamic_routes">Dynamic Routes</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
定義済みのパスを使ってルートを定義するだけでは、複雑なアプリケーションでは必ずしも十分ではありません。Next.jsでは、ページ([param])に括弧を追加して動的なルートを作成することができます。
</blockquote>
<div class="attribution">
&#8212; <a href="https://nextjs.org/docs/routing/dynamic-routes">Next.js Docs より</a>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// pages/movies/[id].js // <b class="conum">(1)</b>

import { useRouter } from 'next/router'

const Movie = () =&gt; {
  const router = useRouter()
  const { id } = router.query // <b class="conum">(2)</b>

  return (
    &lt;div className="container"&gt;
      &lt;h1&gt;Movie with id: { id } &lt;/h1&gt;
    &lt;/div&gt;
  )
}

export default Movie</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>[id].js は命名規則</p>
</li>
<li>
<p>/movies/[id] とした場合の [id] を取得</p>
</li>
</ol>
</div>
<div class="quoteblock">
<blockquote>
動的ルートへのリンクは、hrefとasの組み合わせです。pages/post/[pid].jsのページへのリンクは以下のようになります。
</blockquote>
<div class="attribution">
&#8212; <a href="https://nextjs.org/docs/api-reference/next/link#dynamic-routes">Next.js Docs より</a>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// 略
&lt;Link href="/movies/[id]" as={`/movies/${movie.id}`}&gt;
  &lt;a&gt;&lt;img className="card-img-top" src={movie.image} alt="" /&gt;&lt;/a&gt;
&lt;/Link&gt;
// 略</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dynamic Routes はディレクトリをネストしてもよい。
例えば、 <code>movies/[id]/edit</code> のようなルーティングをしたい場合はネストすると利便性が良い(はず)。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ tree --charset ascii
.
`-- pages
    `-- movies
        `-- [id]
            |-- index.js # <b class="conum">(1)</b>
            `-- edit.js # <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>/movies/[id]</code> で呼ばれるページ</p>
</li>
<li>
<p><code>/movies/[id]/edit</code> で呼ばれるページ</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_コンポジション_containment">コンポジション (Containment)</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
コンポーネントの中には事前には子要素を知らないものもあります。これは Sidebar や Dialog のような汎用的な “入れ物” をあらわすコンポーネントではよく使われています。このようなコンポーネントでは特別な children という props を使い、以下のようにして受け取った子要素を出力することができます。
</blockquote>
<div class="attribution">
&#8212; <a href="https://ja.reactjs.org/docs/composition-vs-inheritance.html">React Docs より</a>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// FancyBorder.jsx
function FancyBorder(props) {
  return (
    &lt;div className={'FancyBorder FancyBorder-' + props.color}&gt; // <b class="conum">(1)</b>
      {props.children} // <b class="conum">(2)</b>
    &lt;/div&gt;
  );
}

// WelcomeDialog.jsx
function WelcomeDialog() {
  return (
    &lt;FancyBorder color="blue"&gt; // <b class="conum">(1)</b>
      &lt;h1 className="Dialog-title"&gt; // <b class="conum">(2)</b>
        Welcome
      &lt;/h1&gt;
      &lt;p className="Dialog-message"&gt;
        Thank you for visiting our spacecraft!
      &lt;/p&gt;
    &lt;/FancyBorder&gt;
  );
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>props.color には color="blue" が渡される。</p>
</li>
<li>
<p>props.children には FancyBorder タグ内の要素が渡される。</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_子から親へのイベント伝播">子から親へのイベント伝播</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
コンポーネントに（onClick のような）イベントハンドラを渡すには、イベントハンドラやその他の関数を props として、子コンポーネントに渡してください。
</blockquote>
<div class="attribution">
&#8212; <a href="https://ja.reactjs.org/docs/faq-functions.html">React Docs より</a>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>下記のサンプルは全体的にコードを省略している。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// actions/index.js
export const createMovie = (movie) =&gt; { // <b class="conum">(1)</b>
  return new Promise((resolve, reject) =&gt; { // <b class="conum">(2)</b>
    // Create ID for movie
    MOVIE_DATA.push(movie)
    setTimeout(() =&gt; {
      resolve(MOVIE_DATA)
      // reject('Cannot fetch data!')
    }, 50)
  })
}

// components/sideMenu.js
import { createMovie } from '../actions'

const SideMenu = (props) =&gt; {

  const handleCreateMovie = (movie) =&gt; { // <b class="conum">(3)</b>
    createMovie(movie).then((movies) =&gt; {
      // Close modal after create
      console.log(JSON.stringify(movies)) // <b class="conum">(4)</b>
    })
  }

  return (
    &lt;div&gt;
      &lt;Modal hasSubmit={false}&gt;
        &lt;MovieCreateForm handleFormSubmit={handleCreateMovie} /&gt; // <b class="conum">(5)</b>
      &lt;/Modal&gt;
    &lt;/div&gt;
  )
}

// components/movieCreateForm.js
const MovieCreateForm = (props) =&gt; { // <b class="conum">(6)</b>

  const submitForm = () =&gt; { // <b class="conum">(8)</b>
    props.handleFormSubmit({...form}) <b class="conum">(7)</b>
  }

  return (
    &lt;form&gt;
      &lt;button onClick={submitForm} type="button" className="btn btn-primary"&gt;Create&lt;/button&gt; // <b class="conum">(9)</b> <b class="conum">(10)</b>
    &lt;/form&gt;
  )
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>メインロジック</p>
</li>
<li>
<p>非同期で結果を返す</p>
</li>
<li>
<p>メインロジックを呼び出すハンドラA</p>
</li>
<li>
<p>非同期処理の結果を受け取り必要な処理を行う</p>
</li>
<li>
<p>子のコンポーネントへハンドラAを渡す</p>
</li>
<li>
<p>props には親からのハンドラAが含まれる</p>
</li>
<li>
<p>親のハンドラAを呼び出し</p>
</li>
<li>
<p>イベント発火により呼び出されるメソッドB</p>
</li>
<li>
<p>イベント発火の起点となるボタンコントローラー</p>
</li>
<li>
<p>onClick にメソッドBを登録</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_custom_server">Custom Server</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
カスタムサーバーを使用することを決める前に、Next.jsの統合ルーターではアプリの要件を満たせない場合にのみ使用すべきであることを覚えておいてください。カスタムサーバーを使用すると、サーバーレス機能や自動静的最適化などの重要なパフォーマンス最適化が削除されます。
</blockquote>
<div class="attribution">
&#8212; <a href="https://nextjs.org/docs/advanced-features/custom-server">Next.js Docs より</a>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const next = require('next')
const express = require('express');

const dev = process.env.NODE_ENV !== 'production'
const app = next({ dev })
const handle = app.getRequestHandler()

app.prepare().then(() =&gt; {

  const server = express();
  // we are handling all of the request comming to our server
  server.get('*', (req, res) =&gt; {
    // next.js is handling requests and providing pages where we are navigating to
    return handle(req, res)
  })


  const PORT = process.env.PORT || 3000;

  server.listen(PORT, (err) =&gt; {
    if (err) throw err
    console.log('&gt; Ready on port ' + PORT)
  })
})</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_axios">axios</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://github.com/axios/axios">axios</a> を用いた HTTP リクエストのサンプル。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">import axios from 'axios'

const BASE_URL = 'http://localhost:3000'

export const getMovies = () =&gt; {
  return axios.get(`${BASE_URL}/api/v1/movies`).then(res =&gt; res.data)
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_処理後の画面遷移などのアクション">処理後の画面遷移などのアクション</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// ...
import { useRouter } from 'next/router' // <b class="conum">(1)</b>

// Containment
const SideMenu = (props) =&gt; {
  // ...
  const router = useRouter() // <b class="conum">(2)</b>

  const handleCreateMovie = (movie) =&gt; {
    createMovie(movie).then((movies) =&gt; {
      modal.closeModal() // <b class="conum">(3)</b>
      router.push('/')  // <b class="conum">(4)</b>
    })
  }

  return (
    // ...
  )
}

export default SideMenu</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>遷移するためのルーティングオブジェクトをインポート</p>
</li>
<li>
<p>ルーティングオブジェクトを取得</p>
</li>
<li>
<p>処理後にダイアログを閉じて</p>
</li>
<li>
<p>トップ画面へ遷移</p>
</li>
</ol>
</div>
<div class="quoteblock">
<blockquote>
useRouterはReactフックであり、クラスでは使用できません。withRouter を使うか、関数コンポーネントでクラスをラップするかのどちらかです。
</blockquote>
<div class="attribution">
&#8212; <a href="https://nextjs.org/docs/api-reference/next/router#userouter">Next.js Docs より</a>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// ...
import Router from 'next/router'

class EditMovie extends React.Component {

  static async getInitialProps({query}) {
    // ...
  }

  handleUpdateMovie = (movie) =&gt; {
    updateMovie(movie).then((updatedMovie) =&gt; {
      Router.push('/movies/[id]', `/movies/${movie.id}`)
    })
  }

  render() {
    // ...
  }
}

export default EditMovie</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_js_で_api_リクエストを処理_api_routes">Next.js で API リクエストを処理 (API Routes)</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
APIルートは、Next.jsでAPIを構築するための簡単なソリューションを提供します。pages/apiフォルダ内の任意のファイルは/api/*にマップされ、ページではなくAPIエンドポイントとして扱われます。
</blockquote>
<div class="attribution">
&#8212; <a href="https://nextjs.org/docs/api-routes/introduction">Next.js Docs より</a>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// pages/api/v1/posts.js
import axios from 'axios'

export default async (req, res) =&gt; {
  const response = await axios.get('https://jsonplaceholder.typicode.com/posts')
  const posts = response.data

  return res.json(posts.slice(0, 20))
}

// 呼び出しサンプル
export const getPosts = () =&gt; {
  return axios.get(`${BASE_URL}/api/v1/posts`).then(res =&gt; res.data)
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_memo">memo</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">cmder</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://cmder.net/">cmder - windows 向けポータブルコンソール</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">ブラケットによる変数アクセス</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://ja.reactjs.org/docs/jsx-in-depth.html#javascript-expressions-as-props">プロパティとしての JavaScript 式</a></p>
</li>
<li>
<p><a href="https://ja.reactjs.org/docs/jsx-in-depth.html#javascript-expressions-as-children">子要素としての JavaScript 式</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">テンプレートリテラル</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="quoteblock">
<blockquote>
テンプレートリテラル中に${変数名}で書かれた変数は評価時に展開されます。 つまり、先ほどの文字列結合は次のように書けます。
</blockquote>
<div class="attribution">
&#8212; <a href="https://jsprimer.net/basic/string/#concat">JavaScript Primer より</a>
</div>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const name = "JavaScript";
console.log(`Hello ${name}!`);// =&gt; "Hello JavaScript!"</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">省略記法1</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="title">省略前</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">export const getMovieById = (id) =&gt; {

  return new Promise((resolve, reject) =&gt; {
    const movieIndex = MOVIE_DATA.findIndex((movie) =&gt; {
      movie.id === id
    })
    const movie = MOVIE_DATA[movieIndex]

    setTimeout(() =&gt; {
      resolve(movie)
    }, 50)
  })
}</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="title">省略後</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">export const getMovieById = (id) =&gt; {

  return new Promise((resolve, reject) =&gt; {
    const movieIndex = MOVIE_DATA.findIndex(m =&gt; m.id === id)
    const movie = MOVIE_DATA[movieIndex]

    setTimeout(() =&gt; resolve(movie), 50)
  })
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">省略記法2</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="title">省略前</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">  const images = movies.map((movie) =&gt; {
    return {
      id: `image-${movie.id}`,
      image: movie.image
    }
  })</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="title">省略後</div>
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">  const images = movies.map(movie =&gt; ({
      id: `image-${movie.id}`,
      image: movie.image }))</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Array#map</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="quoteblock">
<blockquote>
Array#mapは配列の要素を順番にコールバック関数へ渡し、コールバック関数が返した値から新しい配列を返す非破壊的なメソッドです。 配列の各要素を加工したい場合に利用します。
</blockquote>
<div class="attribution">
&#8212; <a href="https://jsprimer.net/basic/array/#array-map">JavaScript Primer より</a>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const array = [1, 2, 3];
// 各要素に10を乗算した新しい配列を作成する
const newArray = array.map((currentValue, index, array) =&gt; {
    return currentValue * 10;
});
console.log(newArray); // =&gt; [10, 20, 30]
// 元の配列とは異なるインスタンス
console.log(array !== newArray); // =&gt; true</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Computed property names</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="quoteblock">
<blockquote>
ブラケット記法を用いたプロパティ定義は、オブジェクトリテラルの中でも利用できます。 オブジェクトリテラル内でのブラケット記法を使ったプロパティ名はComputed property namesと呼ばれます
</blockquote>
<div class="attribution">
&#8212; <a href="https://jsprimer.net/basic/object/#add-property">JavaScript Primer より</a>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const key = "key-string";
// Computed Propertyで`key`の評価結果 "key-string" をプロパティ名に利用
const obj = {
    [key]: "value"
};
console.log(obj[key]); // =&gt; "value"</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">spread構文</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="quoteblock">
<blockquote>
オブジェクトのspread構文は、Object.assignとは異なり必ず新しいオブジェクトを作成します。 なぜならspread構文はオブジェクトリテラルの中でのみ記述でき、オブジェクトリテラルは新しいオブジェクトを作成するためです。
</blockquote>
<div class="attribution">
&#8212; <a href="https://jsprimer.net/basic/object/#object-spread-syntax">JavaScript Primer より</a>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// 値渡し
const objectA = { a: "a" };
const objectB = { ...objectA };
objectB.a = "b";
console.log(objectB); // =&gt; { a: "a" }
console.log(objectA); // =&gt; { a: "b" }</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// 参照渡し
const objectA = { a: "a" };
const objectB = objectA;
objectB.a = "b";
console.log(objectB); // =&gt; { a: "b" }
console.log(objectA); // =&gt; { a: "b" }</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">ランダム文字列の生成</dt>
<dd>
<p><code>Math.random().toString(36).substr(2, 7)</code></p>
<div class="openblock">
<div class="content">
<div class="quoteblock">
<blockquote>
Math.random() の提供する乱数は、暗号に使用可能な安全性を備えていません。セキュリティに関連する目的では使用しないでください。代わりに Web Crypto API（より正確にはwindow.crypto.getRandomValues() メソッド）を使用してください。
</blockquote>
<div class="attribution">
&#8212; <a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Math/random">MDN より</a>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-08-22 22:42:28 +0900
</div>
</div>
</body>
</html>